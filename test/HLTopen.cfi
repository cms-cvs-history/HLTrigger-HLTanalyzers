 include "FWCore/MessageLogger/data/MessageLogger.cfi"
 include "Configuration/StandardSequences/data/FakeConditions.cff"	

### Open-HLT inclues, modules and paths for Egamma
 include "HLTrigger/Egamma/data/EgammaHLTLocal_1e32.cff"
 include "RecoEgamma/EgammaHLTProducers/data/l1IsoRecoEcalCandidate.cff"
 include "RecoEgamma/EgammaHLTProducers/data/l1NonIsoRecoEcalCandidate.cff"
 include "RecoEgamma/EgammaHLTProducers/data/l1IsoPhotonEcalIsol.cff"
 include "RecoEgamma/EgammaHLTProducers/data/l1NonIsoPhotonEcalIsol.cff"
 include "RecoEgamma/EgammaHLTProducers/data/l1IsolatedPhotonHcalIsol.cff"
 include "RecoEgamma/EgammaHLTProducers/data/l1NonIsolatedPhotonHcalIsol.cff"
 include "RecoEgamma/EgammaHLTProducers/data/l1IsoEgammaRegionalRecoTracker.cff"
 include "RecoEgamma/EgammaHLTProducers/data/l1NonIsoEgammaRegionalRecoTracker.cff"
 include "RecoEgamma/EgammaHLTProducers/data/l1IsoPhotonTrackIsol.cff"
 include "RecoEgamma/EgammaHLTProducers/data/l1NonIsoPhotonTrackIsol.cff"
 include "RecoEgamma/EgammaHLTProducers/data/l1IsolatedElectronHcalIsol.cff"
 include "RecoEgamma/EgammaHLTProducers/data/l1NonIsolatedElectronHcalIsol.cff"
 include "RecoEgamma/EgammaHLTProducers/data/pixelMatchElectronL1IsoSequenceForHLT.cff"
 include "RecoEgamma/EgammaHLTProducers/data/pixelMatchElectronL1NonIsoSequenceForHLT.cff"
 include "RecoEgamma/EgammaHLTProducers/data/pixelMatchElectronL1IsoTrackingSequenceForHLT.cff"
 include "RecoEgamma/EgammaHLTProducers/data/pixelMatchElectronL1NonIsoTrackingSequenceForHLT.cff"
 include "RecoEgamma/EgammaHLTProducers/data/l1IsoElectronsRegionalRecoTracker.cff"
 include "RecoEgamma/EgammaHLTProducers/data/l1NonIsoElectronsRegionalRecoTracker.cff"
 include "RecoEgamma/EgammaHLTProducers/data/l1IsoElectronTrackIsol.cff"
 include "RecoEgamma/EgammaHLTProducers/data/l1NonIsoElectronTrackIsol.cff"

  module MyMatchFilterRegional = hltEgammaL1MatchFilterRegional from "HLTrigger/Egamma/data/hltEgammaL1MatchFilterRegional.cfi"
  replace MyMatchFilterRegional.candIsolatedTag = l1IsoRecoEcalCandidate
  replace MyMatchFilterRegional.candNonIsolatedTag = l1NonIsoRecoEcalCandidate
  replace MyMatchFilterRegional.ncandcut = 1
  replace MyMatchFilterRegional.doIsolated = false
## you need to have at least one electron to have the track isolation done.
  module hltL1NonIsoSingleElectronEoverpFilter = hltElectronEoverpFilter from "HLTrigger/Egamma/data/hltElectronEoverpFilter.cfi"
  replace hltL1NonIsoSingleElectronEoverpFilter.candTag = MyMatchFilterRegional
  replace hltL1NonIsoSingleElectronEoverpFilter.electronIsolatedProducer = pixelMatchElectronsL1IsoForHLT
  replace hltL1NonIsoSingleElectronEoverpFilter.electronNonIsolatedProducer = pixelMatchElectronsL1NonIsoForHLT
  replace hltL1NonIsoSingleElectronEoverpFilter.eoverpbarrelcut = 15000.
  replace hltL1NonIsoSingleElectronEoverpFilter.eoverpendcapcut = 24500.
  replace hltL1NonIsoSingleElectronEoverpFilter.ncandcut = 1
  replace hltL1NonIsoSingleElectronEoverpFilter.doIsolated = false

module eml1seeds = HLTLevel1Seed {
         vstring L1Seeds = {"L1_SingleIsoEG12","L1_SingleEG15","L1_DoubleIsoEG8","L1_DoubleEG10"}
         bool andOr = true
         bool byName= true
         InputTag L1ExtraCollections = l1extraParticles
         InputTag L1ExtraParticleMap = l1extraParticleMap
         InputTag L1GTReadoutRecord  = l1extraParticleMap
        }

path DoHltPhoton = {hltBegin & eml1seeds
			& doRegionalEgammaEcal
			& l1IsolatedEcalClusters 
			& l1NonIsolatedEcalClusters
			& l1IsoRecoEcalCandidate
			& l1NonIsoRecoEcalCandidate
			& l1IsolatedPhotonEcalIsol
			& l1NonIsolatedPhotonEcalIsol
			& doLocalHcalWithoutHO
			& l1IsolatedPhotonHcalIsol
			& l1NonIsolatedPhotonHcalIsol
			& doLocalPixel
			& doLocalStrip
			& l1IsoEgammaRegionalRecoTracker
			& l1NonIsoEgammaRegionalRecoTracker
			& l1IsoPhotonTrackIsol
			& l1NonIsoPhotonTrackIsol}

path DoHltElectron = {hltBegin & eml1seeds 
			& doRegionalEgammaEcal 
			& l1IsolatedEcalClusters 
			& l1NonIsolatedEcalClusters 
			& l1IsoRecoEcalCandidate 
			& l1NonIsoRecoEcalCandidate 
			& MyMatchFilterRegional
			& doLocalHcalWithoutHO 
			& l1IsolatedElectronHcalIsol 
			& l1NonIsolatedElectronHcalIsol 
			& doLocalPixel 
			& pixelMatchElectronL1IsoSequenceForHLT 
			& pixelMatchElectronL1NonIsoSequenceForHLT 
			& doLocalStrip // strip rechit for the electron tracking
			& pixelMatchElectronL1IsoTrackingSequenceForHLT 
			& pixelMatchElectronL1NonIsoTrackingSequenceForHLT 
			& hltL1NonIsoSingleElectronEoverpFilter 
			& l1IsoElectronsRegionalRecoTracker 
			& l1NonIsoElectronsRegionalRecoTracker 
			& l1IsoElectronTrackIsol 
			& l1NonIsoElectronTrackIsol}

### Open-HLT includes, modules and paths for Muon
include "HLTrigger/Muon/data/OnlyReco.cff"
path DoHltMuon = { recoHLTMuIso }

### Open-HLT includes, modules and paths for Tau
include "HLTrigger/btau/data/tau/TauHLT.cff"

replace hlt1METSingleTauMET.MinPt = 0.
replace ecalSingleTauMETIsol.Pisol = 1000.
replace isolatedL25SingleTauMET.MinimumTransverseMomentumLeadingTrack = 1.
replace isolatedL25SingleTauMET.MatchingCone = 0.5
replace isolatedL25SingleTauMET.SignalCone = 0.5
replace isolatedL25SingleTauMET.IsolationCone = 0.5
replace isolatedL25SingleTauMET.UseInHLTOpen = true
replace isolatedL3SingleTauMET.MinimumTransverseMomentumLeadingTrack = 1.
replace isolatedL3SingleTauMET.MatchingCone = 0.5
replace isolatedL3SingleTauMET.SignalCone = 0.5
replace isolatedL3SingleTauMET.IsolationCone = 0.5
replace isolatedL3SingleTauMET.UseInHLTOpen = true
replace hlt1METSingleTau.MinPt = 0.
replace ecalSingleTauIsol.Pisol = 1000.
replace isolatedL25SingleTau.MinimumTransverseMomentumLeadingTrack = 1.
replace isolatedL25SingleTau.MatchingCone = 0.5
replace isolatedL25SingleTau.SignalCone = 0.5
replace isolatedL25SingleTau.IsolationCone = 0.5
replace isolatedL25SingleTau.UseInHLTOpen = true
replace isolatedL3SingleTau.MinimumTransverseMomentumLeadingTrack = 1.
replace isolatedL3SingleTau.MatchingCone = 0.5
replace isolatedL3SingleTau.SignalCone = 0.5
replace isolatedL3SingleTau.IsolationCone = 0.5
replace isolatedL3SingleTau.UseInHLTOpen = true
replace ecalDoubleTauIsol.Pisol = 1000.
replace isolatedL25PixelTau.MinimumTransverseMomentumLeadingTrack = 1.
replace isolatedL25PixelTau.MatchingCone = 0.5
replace isolatedL25PixelTau.SignalCone = 0.5
replace isolatedL25PixelTau.IsolationCone = 0.5
replace isolatedL25PixelTau.UseInHLTOpen = true

#include "HLTrigger/xchannel/data/LeptonTauHLTLocal.cff"
path HLT1TauNoFilters = {singleTauL1NoHLT}
path HLT2TauNoFilters = {caloPixelTauL1NoHLT}


### Open-HLT includes, modules and paths for JetMET
include "HLTrigger/Configuration/data/common/CaloTowers.cff"
include "HLTrigger/Configuration/data/common/RecoJetMET.cff"
sequence recoJetMETPath = {doCalo & (doHLTJetReco & doHLTMETReco & doHLTHTReco)}
path DoHltJetMET = {recoJetMETPath}
